(()=>{"use strict";function e(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",t)}function t(t){if("Escape"===t.key){var n=document.querySelector(".popup_is-opened");n&&e(n)}}function n(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",t)}function r(e,t,n,r,o){var c=e.querySelector(".card").cloneNode(!0),i=c.querySelector(".card__image");return i.src=t.link,i.alt="Изображение, отражающее красоту места "+t.name,c.querySelector(".card__title").textContent=t.name,c.querySelector(".card__delete-button").addEventListener("click",(function(){n(c)})),c.querySelector(".card__like-button").addEventListener("click",(function(){r(c)})),i.addEventListener("click",(function(){o(t)})),c}function o(e){e.remove()}function c(e){e.querySelector(".card__like-button").classList.toggle("card__like-button_is-active")}function i(e,t,n){t.classList.remove(e.inputErrorClass),n.textContent="",n.classList.remove(e.errorVisibilityClass)}function u(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?n.classList.remove(e.inactiveButtonClass):n.classList.add(e.inactiveButtonClass)}function a(e,t){Array.from(e.querySelectorAll(t.inputSelector)).forEach((function(n){var r=e.querySelector(".".concat(n.id,"-error"));i(t,n,r)})),e.querySelector(t.submitButtonSelector).classList.add(t.inactiveButtonClass)}var s=document.querySelector("#card-template").content,l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorVisibilityClass:"popup__error_visible"},p=document.querySelector(".places__list"),d=document.querySelector(".profile__title"),_=document.querySelector(".profile__description"),y=document.querySelector(".profile__edit-button"),m=document.querySelector(".popup_type_edit"),f=m.querySelector(".popup__form"),v=f.querySelector(".popup__input_type_name"),S=f.querySelector(".popup__input_type_description"),q=document.querySelector(".profile__add-button"),k=document.querySelector(".popup_type_new-card"),L=k.querySelector(".popup__form"),b=L.querySelector(".popup__input_type_card-name"),E=L.querySelector(".popup__input_type_url"),C=document.querySelector(".popup_type_image"),g=C.querySelector(".popup__image"),h=C.querySelector(".popup__caption"),x=document.querySelectorAll(".popup");function A(e){g.src=e.link,g.alt="Детальное изображение места"+e.name,h.textContent=e.name,n(C)}y.addEventListener("click",(function(){v.value=d.textContent,S.value=_.textContent,a(f,l),n(m)})),q.addEventListener("click",(function(){b.value="",E.value="",a(L,l),n(k)})),f.addEventListener("submit",(function(t){t.preventDefault(),d.textContent=v.value,_.textContent=S.value,e(m)})),L.addEventListener("submit",(function(t){t.preventDefault();var n=r(s,{name:b.value,link:E.value},o,c,A);p.prepend(n),t.target.reset(),e(k)})),x.forEach((function(t){t.addEventListener("click",(function(n){n.target.classList.contains("popup")&&e(t)})),t.querySelector(".popup__close").addEventListener("click",(function(){e(t)})),console.log()})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){var n,r,o,c,a=Array.from(t.querySelectorAll(e.inputSelector)),s=t.querySelector(e.submitButtonSelector);r=t,u(n=e,o=a,c=s),o.forEach((function(e){var t=r.querySelector(".".concat(e.id,"-error"));e.addEventListener("input",(function(){u(n,o,c),function(e,t,n){t.validity.valid?i(e,t,n):(t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),function(e,t,n,r){t.classList.add(e.inputErrorClass),n.textContent=r,n.classList.add(e.errorVisibilityClass)}(e,t,n,t.validationMessage))}(n,e,t)}))}))}))}(l),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=r(s,e,o,c,A);p.append(t)}))})();